<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter 4. Using GHC</title><link rel="stylesheet" href="fptools.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="The Parallel Haskell Compilation System User's Guide, Version 7.4.2"><link rel="up" href="index.html" title="The Parallel Haskell Compilation System User's Guide, Version 7.4.2"><link rel="prev" href="runghc.html" title="Chapter 3. Using runghc"><link rel="next" href="ch04s02.html" title="4.2. Options overview"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Chapter 4. Using GHC</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="runghc.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr></table><hr></div><div class="chapter" title="Chapter 4. Using GHC"><div class="titlepage"><div><div><h2 class="title"><a name="using-ghc"></a>Chapter 4. Using GHC</h2></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="using-ghc.html#idp21522192">4.1. Getting started: compiling programs</a></span></dt><dt><span class="sect1"><a href="ch04s02.html">4.2. Options overview</a></span></dt><dd><dl><dt><span class="sect2"><a href="ch04s02.html#idp21593192">4.2.1. Command-line arguments</a></span></dt><dt><span class="sect2"><a href="ch04s02.html#source-file-options">4.2.2. Command line options in source files</a></span></dt><dt><span class="sect2"><a href="ch04s02.html#idp21606920">4.2.3. Setting options in GHCi</a></span></dt></dl></dd><dt><span class="sect1"><a href="static-dynamic-flags.html">4.3. Static, Dynamic, and Mode options</a></span></dt><dt><span class="sect1"><a href="file-suffixes.html">4.4. Meaningful file suffixes</a></span></dt><dt><span class="sect1"><a href="modes.html">4.5. Modes of operation</a></span></dt><dd><dl><dt><span class="sect2"><a href="modes.html#make-mode">4.5.1. Using <span class="command"><strong>ghc</strong></span> <code class="option">&#8211;&#8211;make</code></a></span></dt><dt><span class="sect2"><a href="modes.html#eval-mode">4.5.2. Expression evaluation mode</a></span></dt><dt><span class="sect2"><a href="modes.html#options-order">4.5.3. Batch compiler mode</a></span></dt><dd><dl><dt><span class="sect3"><a href="modes.html#overriding-suffixes">4.5.3.1. Overriding the default behaviour for a file</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="options-help.html">4.6. Help and verbosity options</a></span></dt><dt><span class="sect1"><a href="separate-compilation.html">4.7. Filenames and separate compilation</a></span></dt><dd><dl><dt><span class="sect2"><a href="separate-compilation.html#source-files">4.7.1. Haskell source files</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#output-files">4.7.2. Output files</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#search-path">4.7.3. The search path</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#options-output">4.7.4. Redirecting the compilation output(s)</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#keeping-intermediates">4.7.5. Keeping Intermediate Files</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#temp-files">4.7.6. Redirecting temporary files</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#hi-options">4.7.7. Other options related to interface files</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#recomp">4.7.8. The recompilation checker</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#mutual-recursion">4.7.9. How to compile mutually recursive modules</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#using-make">4.7.10. Using <span class="command"><strong>make</strong></span></a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#makefile-dependencies">4.7.11. Dependency generation</a></span></dt><dt><span class="sect2"><a href="separate-compilation.html#orphan-modules">4.7.12. Orphan modules and instance declarations</a></span></dt></dl></dd><dt><span class="sect1"><a href="options-sanity.html">4.8. Warnings and sanity-checking</a></span></dt><dt><span class="sect1"><a href="packages.html">4.9. 
Packages
 </a></span></dt><dd><dl><dt><span class="sect2"><a href="packages.html#using-packages">4.9.1. Using Packages
  </a></span></dt><dt><span class="sect2"><a href="packages.html#package-main">4.9.2. The main package</a></span></dt><dt><span class="sect2"><a href="packages.html#package-overlaps">4.9.3. Consequences of packages for the Haskell language</a></span></dt><dt><span class="sect2"><a href="packages.html#package-databases">4.9.4. Package Databases</a></span></dt><dd><dl><dt><span class="sect3"><a href="packages.html#ghc-package-path">4.9.4.1. The <code class="literal">GHC_PACKAGE_PATH</code> environment variable</a></span></dt></dl></dd><dt><span class="sect2"><a href="packages.html#package-ids">4.9.5. Package IDs, dependencies, and broken packages</a></span></dt><dt><span class="sect2"><a href="packages.html#package-management">4.9.6. Package management (the <code class="literal">ghc-pkg</code> command)</a></span></dt><dt><span class="sect2"><a href="packages.html#building-packages">4.9.7. Building a package from Haskell source</a></span></dt><dt><span class="sect2"><a href="packages.html#installed-pkg-info">4.9.8. 
      <code class="literal">InstalledPackageInfo</code>: a package specification
    </a></span></dt></dl></dd><dt><span class="sect1"><a href="options-optimise.html">4.10. Optimisation (code improvement)</a></span></dt><dd><dl><dt><span class="sect2"><a href="options-optimise.html#optimise-pkgs">4.10.1. <code class="option">-O*</code>: convenient &#8220;packages&#8221; of optimisation flags.</a></span></dt><dt><span class="sect2"><a href="options-optimise.html#options-f">4.10.2. <code class="option">-f*</code>: platform-independent flags</a></span></dt></dl></dd><dt><span class="sect1"><a href="code-generators.html">4.11. GHC Backends</a></span></dt><dd><dl><dt><span class="sect2"><a href="code-generators.html#native-code-gen">4.11.1. Native code Generator (<code class="option">-fasm</code>)</a></span></dt><dt><span class="sect2"><a href="code-generators.html#llvm-code-gen">4.11.2. LLVM Code Generator (<code class="option">-fllvm</code>)</a></span></dt><dt><span class="sect2"><a href="code-generators.html#c-code-gen">4.11.3. C Code Generator (<code class="option">-fvia-C</code>)</a></span></dt><dt><span class="sect2"><a href="code-generators.html#unreg">4.11.4. Unregisterised compilation</a></span></dt></dl></dd><dt><span class="sect1"><a href="options-phases.html">4.12. Options related to a particular phase</a></span></dt><dd><dl><dt><span class="sect2"><a href="options-phases.html#replacing-phases">4.12.1. Replacing the program for one or more phases</a></span></dt><dt><span class="sect2"><a href="options-phases.html#forcing-options-through">4.12.2. Forcing options to a particular phase</a></span></dt><dt><span class="sect2"><a href="options-phases.html#c-pre-processor">4.12.3. Options affecting the C pre-processor</a></span></dt><dd><dl><dt><span class="sect3"><a href="options-phases.html#cpp-string-gaps">4.12.3.1. CPP and string gaps</a></span></dt></dl></dd><dt><span class="sect2"><a href="options-phases.html#pre-processor">4.12.4. Options affecting a Haskell pre-processor</a></span></dt><dt><span class="sect2"><a href="options-phases.html#options-codegen">4.12.5. Options affecting code generation</a></span></dt><dt><span class="sect2"><a href="options-phases.html#options-linker">4.12.6. Options affecting linking</a></span></dt></dl></dd><dt><span class="sect1"><a href="using-shared-libs.html">4.13. Using shared libraries</a></span></dt><dd><dl><dt><span class="sect2"><a href="using-shared-libs.html#idp23459224">4.13.1. Building programs that use shared libraries</a></span></dt><dt><span class="sect2"><a href="using-shared-libs.html#idp23517784">4.13.2. Shared libraries for Haskell packages</a></span></dt><dt><span class="sect2"><a href="using-shared-libs.html#idp23524352">4.13.3. Shared libraries that export a C API</a></span></dt><dt><span class="sect2"><a href="using-shared-libs.html#finding-shared-libs">4.13.4. Finding shared libraries at runtime</a></span></dt><dd><dl><dt><span class="sect3"><a href="using-shared-libs.html#finding-shared-libs-unix">4.13.4.1. Unix</a></span></dt><dt><span class="sect3"><a href="using-shared-libs.html#finding-shared-libs-mac">4.13.4.2. Mac OS X</a></span></dt></dl></dd></dl></dd><dt><span class="sect1"><a href="using-concurrent.html">4.14. Using Concurrent Haskell</a></span></dt><dt><span class="sect1"><a href="using-smp.html">4.15. Using SMP parallelism</a></span></dt><dd><dl><dt><span class="sect2"><a href="using-smp.html#parallel-compile-options">4.15.1. Compile-time options for SMP parallelism</a></span></dt><dt><span class="sect2"><a href="using-smp.html#parallel-options">4.15.2. RTS options for SMP parallelism</a></span></dt><dt><span class="sect2"><a href="using-smp.html#idp23572040">4.15.3. Hints for using SMP parallelism</a></span></dt></dl></dd><dt><span class="sect1"><a href="options-platform.html">4.16. Platform-specific Flags</a></span></dt><dt><span class="sect1"><a href="runtime-control.html">4.17. Running a compiled program</a></span></dt><dd><dl><dt><span class="sect2"><a href="runtime-control.html#setting-rts-options">4.17.1. Setting RTS options</a></span></dt><dd><dl><dt><span class="sect3"><a href="runtime-control.html#rts-opts-cmdline">4.17.1.1. Setting RTS options on the command line</a></span></dt><dt><span class="sect3"><a href="runtime-control.html#rts-opts-compile-time">4.17.1.2. Setting RTS options at compile time</a></span></dt><dt><span class="sect3"><a href="runtime-control.html#rts-options-environment">4.17.1.3. Setting RTS options with the <code class="envar">GHCRTS</code>
          environment variable</a></span></dt><dt><span class="sect3"><a href="runtime-control.html#rts-hooks">4.17.1.4. &#8220;Hooks&#8221; to change RTS behaviour</a></span></dt></dl></dd><dt><span class="sect2"><a href="runtime-control.html#rts-options-misc">4.17.2. Miscellaneous RTS options</a></span></dt><dt><span class="sect2"><a href="runtime-control.html#rts-options-gc">4.17.3. RTS options to control the garbage collector</a></span></dt><dt><span class="sect2"><a href="runtime-control.html#idp23778488">4.17.4. RTS options for concurrency and parallelism</a></span></dt><dt><span class="sect2"><a href="runtime-control.html#rts-profiling">4.17.5. RTS options for profiling</a></span></dt><dt><span class="sect2"><a href="runtime-control.html#rts-eventlog">4.17.6. Tracing</a></span></dt><dt><span class="sect2"><a href="runtime-control.html#rts-options-debugging">4.17.7. RTS options for hackers, debuggers, and over-interested
    souls</a></span></dt><dt><span class="sect2"><a href="runtime-control.html#ghc-info">4.17.8. Getting information about the RTS</a></span></dt></dl></dd><dt><span class="sect1"><a href="ext-core.html">4.18. Generating and compiling External Core Files</a></span></dt><dt><span class="sect1"><a href="options-debugging.html">4.19. Debugging the compiler</a></span></dt><dd><dl><dt><span class="sect2"><a href="options-debugging.html#dumping-output">4.19.1. Dumping out compiler intermediate structures</a></span></dt><dt><span class="sect2"><a href="options-debugging.html#formatting%20dumps">4.19.2. Formatting dumps</a></span></dt><dt><span class="sect2"><a href="options-debugging.html#supression">4.19.3. Suppressing unwanted information</a></span></dt><dt><span class="sect2"><a href="options-debugging.html#checking-consistency">4.19.4. Checking for consistency</a></span></dt><dt><span class="sect2"><a href="options-debugging.html#idp24193336">4.19.5. How to read Core syntax (from some <code class="option">-ddump</code>
    flags)</a></span></dt></dl></dd><dt><span class="sect1"><a href="flag-reference.html">4.20. Flag reference</a></span></dt><dd><dl><dt><span class="sect2"><a href="flag-reference.html#idp24266824">4.20.1. Help and verbosity options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24339456">4.20.2. Which phases to run</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24349184">4.20.3. Alternative modes of operation</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24359704">4.20.4. Redirecting output</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24375704">4.20.5. Keeping intermediate files</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24385072">4.20.6. Temporary files</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24389264">4.20.7. Finding imports</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24395960">4.20.8. Interface file options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24403600">4.20.9. Recompilation checking</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#interactive-mode-options">4.20.10. Interactive-mode options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24424976">4.20.11. Packages</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24444384">4.20.12. Language options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24570832">4.20.13. Warnings</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24616920">4.20.14. Optimisation levels</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24622632">4.20.15. Individual optimisations</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24671888">4.20.16. Profiling options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24684792">4.20.17. Program coverage options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24690312">4.20.18. Haskell pre-processor options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24694792">4.20.19. C pre-processor options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24703744">4.20.20. Code generation options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24713056">4.20.21. Linking options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24746912">4.20.22. Plugin options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24752816">4.20.23. Replacing phases</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24777008">4.20.24. Forcing options to particular phases</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24797408">4.20.25. Platform-specific options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24802976">4.20.26. External core file options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24807552">4.20.27. Compiler debugging options</a></span></dt><dt><span class="sect2"><a href="flag-reference.html#idp24878832">4.20.28. Misc compiler options</a></span></dt></dl></dd></dl></div><a class="indexterm" name="idp21542432"></a><a class="indexterm" name="idp21521784"></a><div class="sect1" title="4.1. Getting started: compiling programs"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp21522192"></a>4.1. Getting started: compiling programs</h2></div></div></div><p>
      In this chapter you'll find a complete reference to the GHC
      command-line syntax, including all 400+ flags.  It's a large and
      complex system, and there are lots of details, so it can be
      quite hard to figure out how to get started.  With that in mind,
      this introductory section provides a quick introduction to the
      basic usage of GHC for compiling a Haskell program, before the
      following sections dive into the full syntax.
    </p><p>
      Let's create a Hello World program, and compile and run it.
      First, create a file <code class="filename">hello.hs</code> containing
      the Haskell code:
    </p><pre class="programlisting">
main = putStrLn "Hello, World!"
</pre><p>To compile the program, use GHC like this:</p><pre class="screen">
$ ghc hello.hs</pre><p>(where <code class="literal">$</code> represents the prompt: don't
       type it).  GHC will compile the source
       file <code class="filename">hello.hs</code>, producing
       an <em class="firstterm">object
       file</em> <code class="filename">hello.o</code> and
       an <em class="firstterm">interface
       file</em> <code class="filename">hello.hi</code>, and then it
       will link the object file to the libraries that come with GHC
       to produce an executable called <code class="filename">hello</code> on
       Unix/Linux/Mac, or <code class="filename">hello.exe</code> on
       Windows.</p><p>
      By default GHC will be very quiet about what it is doing, only
      printing error messages.  If you want to see in more detail
      what's going on behind the scenes, add <code class="option">-v</code> to
      the command line.
    </p><p>
      Then we can run the program like this:
    </p><pre class="screen">
$ ./hello
Hello World!</pre><p>
      If your program contains multiple modules, then you only need to
      tell GHC the name of the source file containing
      the <code class="filename">Main</code> module, and GHC will examine
      the <code class="literal">import</code> declarations to find the other
      modules that make up the program and find their source files.
      This means that, with the exception of
      the <code class="literal">Main</code> module, every source file should be
      named after the module name that it contains (with dots replaced
      by directory separators).  For example, the
      module <code class="literal">Data.Person</code> would be in the
      file <code class="filename">Data/Person.hs</code> on Unix/Linux/Mac,
      or <code class="filename">Data\Person.hs</code> on Windows.
    </p></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="runghc.html">Prev</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch04s02.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter 3. Using runghc </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> 4.2. Options overview</td></tr></table></div></body></html>
